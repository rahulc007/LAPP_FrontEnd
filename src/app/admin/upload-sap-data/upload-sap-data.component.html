<h2 class="page_heading dashboard">{{'upload'| translate}}</h2>

<div *ngIf="msg" class="alert alert-success alert-dismissible" data-auto-dismiss role="alert">
    <button class="close" aria-label="close" data-dismiss="alert">&times;</button>
    <span id="alertMsg">{{'fileuploadedsuccess'| translate}}</span>
</div>
<div *ngIf="errorMsg" class="alert alert-danger alert-dismissible" data-auto-dismiss role="alert">
    <button class="close" aria-label="close" data-dismiss="alert">&times;</button>
    <span id="alertErrMsg">{{'pleaseuploadwithvalidheaders'| translate}}</span>
</div>

<div class="row">
  <div class="col-4">
    <div class="input-container">
        <button class="browse-btn" (click)="file.click()">
          {{'Browse'| translate}}
        </button>
      <input type="file" ng2FileSelect [uploader]="uploader" #file accept=".xlsx, .xls, .csv" (click)="file.value=''" placeholder="Select file">
      <span class="file-info" *ngFor="let item of uploader.queue">{{ item?.file?.name }}</span>
    </div>
    <p class="upload_msg">{{'filenameshould'| translate}}<b>dd/mm/yyyy hh:mm</b> {{'format'| translate}}</p>
    <p class="upload_msg">{{'pleaseuploadxcel'| translate}}</p>
  </div>
  <div class="col">
    <!-- <div class="upload_btn"></div> -->
      <button type="button" class="btn btn-s btn-orange upload_btn" (click)="uploader.uploadAll()"
        [disabled]="!uploader.getNotUploadedItems().length">
         {{'upload'| translate}}
      </button>
  </div>
</div>
<!-- <div class="row">&nbsp;</div> -->
<div class="row">
  <div class="col-md-3 offset-md-9">
    <button type="button" class="btn btn-s btn-orange upload_btn" (click)="checkStatus()">
     {{'checkstaus'| translate}}
  </button>
  </div>
</div>
<div class="row">
  <div class="col text-center">
  </div>
  
  <div class="col-md-3 ml" *ngIf="isAdmin===1">
      <button class="btn btn-orange" (click)="downloadfile()" [disabled]="!data || data.length <=0">{{'download'| translate}}</button>
  </div>
 
</div>

<div class="clearfix">&nbsp;</div>

<div class="row">
  <div class="col">
    <div class="table table-bordered">
    
      <ngx-table [configuration]="configuration" [data]="data" [columns]="columns">
        <ng-template let-row>
          <td>{{row.fileName}}</td>
          <td>{{row.fileSize}}</td>
          <td>{{row.orderCount}}</td>
          <td>{{row.uploadedBy}}</td>
          <td>{{row.createdDate | date:'medium'}}</td>
          <td [ngSwitch]="row.fileStatus">
            <div *ngSwitchCase="1">{{'uploading'| translate}}</div>
            <div *ngSwitchCase="2">{{'inprogress'| translate}}</div>
            <div *ngSwitchCase="3">{{'uploaded'| translate}}</div>
          </td>
        </ng-template>
      </ngx-table>
       <!-- <app-pagination [pager]=pager (clicked)="loadPage($event)"></app-pagination>  -->
    </div>
  </div>
</div>


